From ce4d251512d3980a0a91473dabf1a176d36ced9f Mon Sep 17 00:00:00 2001
From: "hc7.choi" <hc7choi@hc7.choi>
Date: Thu, 5 Sep 2013 17:37:57 +0900
Subject: [PATCH] JQM add touchcancel event handler

Change-Id: Idf0091e0c9800e00a685a417f18861f80cd44fa9
---
 .../jquery-mobile-1.2.0/js/jquery.mobile.vmouse.js |   18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

diff --git a/libs/js/jquery-mobile-1.2.0/js/jquery.mobile.vmouse.js b/libs/js/jquery-mobile-1.2.0/js/jquery.mobile.vmouse.js
index a98b73e..a679990 100644
--- a/libs/js/jquery-mobile-1.2.0/js/jquery.mobile.vmouse.js
+++ b/libs/js/jquery-mobile-1.2.0/js/jquery.mobile.vmouse.js
@@ -281,6 +281,22 @@ function handleTouchMove( event ) {
 	startResetTimer();
 }
 
+function handleTouchCancel( event ){
+	if ( blockTouchTriggers ) {
+		return;
+	}
+
+	disableTouchBindings();
+
+	var flags = getVirtualBindingFlags( event.target );
+
+	triggerVirtualEvent( "vmousecancel", event, flags );
+
+	didScroll = false;
+
+	startResetTimer();
+}
+
 function handleTouchEnd( event ) {
 	if ( blockTouchTriggers ) {
 		return;
@@ -376,6 +392,7 @@ function getSpecialEventObject( eventType ) {
 				if ( activeDocHandlers[ "touchstart" ] === 1 ) {
 					$document.bind( "touchstart", handleTouchStart )
 						.bind( "touchend", handleTouchEnd )
+						.bind( "touchcancel", handleTouchCancel )
 
 						// On touch platforms, touching the screen and then dragging your finger
 						// causes the window content to scroll after some distance threshold is
@@ -413,6 +430,7 @@ function getSpecialEventObject( eventType ) {
 					$document.unbind( "touchstart", handleTouchStart )
 						.unbind( "touchmove", handleTouchMove )
 						.unbind( "touchend", handleTouchEnd )
+						.unbind( "touchcancel", handleTouchCancel)
 						.unbind( "scroll", handleScroll );
 				}
 			}
-- 
1.7.9.5

