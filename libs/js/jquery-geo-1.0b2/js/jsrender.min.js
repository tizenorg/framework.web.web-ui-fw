/*! JsRender v1.0pre: http://github.com/BorisMoore/jsrender */
/*
 * Optimized version of jQuery Templates, for rendering to string.
 * Does not require jQuery, or HTML DOM
 * Integrates with JsViews (http://github.com/BorisMoore/jsviews)
 * Copyright 2012, Boris Moore
 * Released under the MIT License.
 */
this.jsviews||this.jQuery&&jQuery.views||function(a,b){function A(a,b){var c="\\"+a.charAt(0),d="\\"+a.charAt(1),g="\\"+b.charAt(0),h="\\"+b.charAt(1);return z.rTag=e=d+"(?:(?:(\\w+(?=[\\/\\s"+g+"]))|(?:(\\w+)?(:)|(>)|(\\*)))"+"\\s*((?:[^"+g+"]|"+g+"(?!"+h+"))*?)"+"(\\/)?|(?:\\/(\\w+)))"+g,e=new RegExp(c+e+h,"g"),f=new RegExp("<.*>|"+a+".*"+b),this}function B(a){var c=this,d=c.tmpl.helpers||{};return a=(c.ctx[a]!==b?c.ctx:d[a]!==b?d:I[a]!==b?I:{})[a],typeof a!="function"?a:function(){return a.apply(c,arguments)}}function C(a,b,c){var d=b.tmpl.converters;return a=d&&d[a]||J[a],a?a.call(b,c):c}function D(a,c,d,e,f){f.props=f.props||{};var h,i=f.props.tmpl,k=c.tmpl.tags,l=c.tmpl.templates,m=arguments,n=k&&k[a]||H[a];return n?(e=e&&c.tmpl.tmpls[e-1],i=i||e||b,f.tmpl=""+i===i?l&&l[i]||G[i]||G(i):i,f.isTag=j,f.converter=d,f.view=c,f.renderContent=K,c.ctx&&g(f.ctx,c.ctx),h=n.apply(f,m.length>5?x.call(m,5):[]),h||(h==b?"":h.toString())):""}function E(a,c,e,f,g,h){var i=e.views,j={tmpl:g,path:c,parent:e,data:f,ctx:a,views:d.isArray(f)?[]:{},hlp:B};return d.isArray(i)?i.splice(j.index=h!==b?h:i.length,0,j):i[j.index="_"+r++]=j,j}function F(a,c,d,e,f){var g,i;if(d&&typeof d=="object"&&!d.nodeType){for(g in d)c(g,d[g]);return a}if(!d||e===b)f&&(e=f(b,e||d));else if(""+d===d)if(e===null)delete c[d];else if(e=f?f(d,e):e)c[d]=e;return(i=h.onStoreItem)&&i(c,d,e,f),e}function G(a,b){return F(this,G,a,b,O)}function H(a,b){return F(this,H,a,b)}function I(a,b){return F(this,I,a,b)}function J(a,b){return F(this,J,a,b)}function K(a,c,e,f,k){var l,m,n,o,p,q,r,s,t,u,v={},w=k===j,x=this,y="";x.isTag?(t=x.tmpl,c=c||x.ctx,e=e||x.view,f=f||x.path,k=k||x.index,v=x.props):t=x.jquery&&x[0]||x,e=e||z.topView,s=e.ctx,u=t.layout,a===e&&(a=e.data,u=j),c=c&&c===s?s:s?(s=g({},s),c)?g(s,c):s:c||{},v.link===i&&(c.link=i),t.fn||(t=G[t]||G(t)),p=c.link&&h.onRenderItem,q=c.link&&h.onRenderItems;if(t){if(d.isArray(a)&&!u){o=w?e:k!==b&&e||E(c,f,e,a,t,k);for(l=0,m=a.length;l<m;l++)n=a[l],r=t.fn(n,E(c,f,o,n,t,(k||0)+l),z),y+=p?p(r,v):r}else o=w?e:E(c,f,e,a,t,k),y+=a||u?t.fn(a,o,z):"";return e.topKey=o.index,q?q(y,f,o.index,t,v):y}return""}function L(){throw"Syntax error"}function M(a,b,c){function I(b){b-=D,b&&F.push(a.substr(D,b).replace(n,"\\n"))}function J(b,e,f,g,h,i,k,l,m,n){h&&(g=":",f="html");var p="",r="",s=!l&&!g;e=e||g,I(n),D=n+b.length,i?z&&F.push(["*",k.replace(o,"$1")]):e?(e==="else"&&(G[5]=a.substring(G[5],n),G=E.pop(),F=G[3],s=j),k=k?N(k,c).replace(q,function(a,b,c){return b?r+=c+",":p+=c+",",""}):"",p=p.slice(0,-1),k=k.slice(0,-1),d=[e,f||"",k,s&&[],"{"+(p?"props:{"+p+"},":"")+"path:'"+k+"'"+(r?",ctx:{"+r.slice(0,-1)+"}":"")+"}"],s&&(E.push(G),G=d,G[5]=D),F.push(d)):m&&(G[5]=a.substring(G[5],n),G=E.pop());if(!G)throw"Expected block tag";F=G[3]}var d,f,g,h,i,k,l,m,r,s,t,u,w,x,y,z,A=b?{allowCode:z=b.allowCode,debug:b.debug}:{},B=b&&b.tmpls,C=[],D=0,E=[],F=C,G=[,,,C],H=0;a=a.replace(p,"\\$1"),a.replace(e,J),I(a.length),h=C.length,i=h?"":'"";';for(g=0;g<h;g++)f=C[g],f[0]==="*"?i=i.slice(0,g?-1:-3)+";"+f[1]+(g+1<h?"ret+=":""):""+f===f?i+='"'+f+'"+':(t=f[0],u=f[1],w=f[2],F=f[3],x=f[4],a=f[5],F&&(y=P(a,A,b,H++),M(a,y),B.push(y)),s=s||x.indexOf("view")>-1,i+=(t===":"?u==="html"?(l=j,"e("+w):u?(r=j,'c("'+u+'",view,'+w):(m=j,"((v="+w+')!=u?v:""'):(k=j,'t("'+t+'",view,"'+(u||"")+'",'+(F?B.length:'""')+","+x+(w?",":"")+w))+")+");return i=new Function("data, view, j, b, u",v+(m?"v,":"")+(k?"t=j.tag,":"")+(r?"c=j.convert,":"")+(l?"e=j.converters.html,":"")+"ret; try{\n\n"+(A.debug?"debugger;":"")+(z?"ret=":"return ")+i.slice(0,-1)+";\n\n"+(z?"return ret;":"")+"}catch(e){return j.err(e);}"),b&&(b.fn=i,b.useVw=r||s||k),i}function N(a,b){function h(a,h,k,m,n,o,p,q,r,s,t,u,v,w,x,y){function z(a,c,d,e,f,g,h){if(c){var i=(d?'view.hlp("'+d+'")':e?"view":"data")+(h?(f?"."+f:d?"":e?"":"."+c)+(g||""):(h=d?"":e?f||"":c,""));return b&&r!=="("&&(i="b("+i+',"'+h+'")'),i+(h?"."+h:"")}return a}n=n||"",k=k||h||t,m=m||q,r=r||x||"",n=n||"";if(o)L();else return g?(g=!u,g?a:'"'):f?(f=!v,f?a:'"'):(k?(e++,k):"")+(y?e?"":c?(c=i,"\b"):",":p?(e&&L(),c=j,"\b"+m+":"):m?m.replace(l,z)+(r?(d[++e]=j,r):n):n?a:w?(d[e--]=i,w)+(r?(d[++e]=j,r):""):s?(d[e]||L(),","):h?"":(g=u,f=v,'"'))}var c,d={},e=0,f=i,g=i;return a=(a+" ").replace(m,h),a}function O(a,c,d,e){function n(b){if(""+b===b||b.nodeType>0)return i=b.nodeType>0?b:!f.test(b)&&k&&k(b)[0],i&&i.type&&(b=G[i.getAttribute(u)],b||(a=a||"_"+s++,i.setAttribute(u,a),b=O(a,i.innerHTML,d,e),G[a]=b)),b}var h,i,j,l,m;h=n(c),e=e||(c.markup?c:{}),e.name=a,l=e.templates,!h&&c.markup&&(h=n(c.markup))&&h.fn&&(h.debug!==c.debug||h.allowCode!==c.allowCode)&&(h=h.markup);if(h!==b){a&&!d&&(y[a]=function(){return c.render.apply(c,arguments)}),h.fn||c.fn?h.fn&&(a&&a!==h.name?c=g(g({},h),e):c=h):(c=P(h,e,d,0),M(h,c));for(j in l)m=l[j],m.name!==j&&(l[j]=O(j,m,c));return c}}function P(a,b,c,d){function e(a){c[a]&&(f[a]=g(g({},c[a]),b[a]))}b=b||{};var f={markup:a,tmpls:[],links:[],render:K};return c&&(c.templates&&(f.templates=g(g({},c.templates),b.templates)),f.parent=c,f.name=c.name+"["+d+"]",f.index=d),g(f,b),c&&(e("templates"),e("tags"),e("helpers"),e("converters")),f}function Q(a){return t[a]||(t[a]="&#"+a.charCodeAt(0)+";")}var c="v1.0pre",d,e,f,g,h={},i=!1,j=!0,k=a.jQuery,l=/^(?:null|true|false|\d[\d.]*|([\w$]+|~([\w$]+)|#(view|([\w$]+))?)([\w$.]*?)(?:[.[]([\w$]+)\]?)?|(['"]).*\8)$/g,m=/(\()(?=|\s*\()|(?:([([])\s*)?(?:([#~]?[\w$.]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*([)\]])([([]?))|(\s+)/g,n=/\r?\n/g,o=/\\(['"])/g,p=/\\?(['"])/g,q=/\x08(~)?([^\x08]+)\x08/g,r=0,s=0,t={"&":"&amp;","<":"&lt;",">":"&gt;"},u="data-jsv-tmpl",v="var j=j||"+(k?"jQuery.":"js")+"views,",w=/[\x00"&'<>]/g,x=Array.prototype.slice,y={},z={jsviews:c,sub:h,debugMode:j,err:function(a){return z.debugMode?"<br/><b>Error:</b> <em> "+(a.message||a)+". </em>":'""'},tmplFn:M,render:y,templates:G,tags:H,helpers:I,converters:J,View:E,convert:C,delimiters:A,tag:D};k?(d=k,d.templates=G,d.render=y,d.views=z,d.fn.render=K):(d=a.jsviews=z,d.extend=function(a,b){var c;a=a||{};for(c in b)a[c]=b[c];return a},d.isArray=Array&&Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"}),g=d.extend,z.topView={views:{},tmpl:{},hlp:B,ctx:z.helpers},H({"if":function(){var a=this,c=a.view;return c.onElse=function(a,d){var e=0,f=d.length;while(f&&!d[e++])if(e===f)return"";return c.onElse=b,a.path="",a.renderContent(c)},c.onElse(this,arguments)},"else":function(){var a=this.view;return a.onElse?a.onElse(this,arguments):""},"for":function(){var a,b=this,c="",d=arguments,e=d.length;b.props.layout&&(b.tmpl.layout=j);for(a=0;a<e;a++)c+=b.renderContent(d[a]);return c},"=":function(a){return a},"*":function(a){return a}}),J({html:function(a){return a!=b?String(a).replace(w,Q):""}}),A("{{","}}")}(this)
