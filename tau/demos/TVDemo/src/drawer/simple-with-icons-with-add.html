<!DOCTYPE html>
<html>
<head>
	<script data-build-remove="false">
		var tauConfig = {
			autoBuildOnPageChange: true
		};
	</script>
	<script type="text/javascript" src="../../lib/tau/tv/js/tau.js"
			data-build-remove="false"></script>
	<link rel="stylesheet" href="../../lib/tau/tv/theme/default/tau.css">

	<title>TV UI Demo</title>
</head>

<body class="ui-pagecontainer" data-background="../img/bg.jpg">
<div class="ui-page ui-page-active" id="sia-main-drawer" data-role="page">
	<div class="ui-content"></div>
	<div data-role="drawer" data-position="left" id="sia-left-drawer"
		 data-width="301" data-close-on-click="false" data-overlay="false">
		<a class="ui-btn ui-drawer-close"
		   id="sia-close" data-inline="true" data-role="button"></a>
		<ul class="ui-home-bar" id="sia-home-bar">
			<li><a data-icon="source" data-iconpos="top">Andrew</a></li>
			<li><a data-icon="live" data-iconpos="top">Live</a></li>
			<li><a data-icon="movie" data-iconpos="top">Movies</a></li>
			<li><a data-icon="app" data-iconpos="top">Apps</a></li>
			<li><a data-icon="source" data-iconpos="top">Source</a></li>
			<li class="ui-home-bar-move-disabled">
				<a href="#add" data-rel="popup"
				   data-icon="add" data-iconpos="top">pin</a></li>
		</ul>
	</div>
	<div id="add" data-role="popup" class="ui-popup-listview">
		<header>Add element to Home Bar</header>
		<div style="overflow-y:scroll;">
			<ul class="ui-listview" id="sia-add-list">
				<li><a href="" data-add-info="live" data-rel="back">Live</a>
				</li>
				<li><a href="" data-add-info="movie" data-rel="back">Movies</a>
				</li>
				<li><a href="" data-add-info="app" data-rel="back">Apps</a></li>
				<li><a href="" data-add-info="source" data-rel="back">Source</a>
				</li>
			</ul>
		</div>
		<footer>
			<a data-role="button" id="sia-listPopup-cancel" class="ui-btn"
			   data-rel="back">Cancel</a>
		</footer>
	</div>
	<script>
		(function () {
			var mainPage = document.getElementById("sia-main-drawer"),
					closeButton = document.getElementById("sia-close"),
					drawerElement = document.getElementById("sia-left-drawer"),
					addListElement = document.getElementById("sia-add-list"),
					drawer,
					homeBarElement = document.getElementById("sia-home-bar"),
					homeBar;

			mainPage.addEventListener("pageshow", function () {
				drawer = tau.widget.Drawer(drawerElement);
				homeBar = tau.widget.HomeBar(homeBarElement);
				setTimeout(function () {
					drawer.open();
				}, 1000);
			});
			mainPage.addEventListener("vclick", function () {
				if (!drawer.isOpen()) {
					drawer.open();
				}
			});
			closeButton.addEventListener("vclick", function () {
				drawer.close();
			});
			addListElement.addEventListener("vclick", function (event) {
				var newLi = document.createElement("li"),
						target = event.target;
				newLi.innerHTML = "<a data-icon='" + target.dataset.addInfo + "' data-iconpos='top'>" + target.textContent + "</a>";
				homeBar.add(newLi);
				tau.engine.createWidgets(newLi);
			});
		}());
	</script>
</div>
</body>
</html>
