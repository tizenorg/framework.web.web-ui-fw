<!DOCTYPE html>
<html>
	<head>
		<title>throttledresize tests</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<link rel="stylesheet" href="../../../../libs/qunit-1.11.0.css">
	</head>
	<body>
		<div id="qunit"></div>
		<div id="qunit-fixture">
			<div data-role="page" id="first">
				<div data-role="mock" id="mock1">Mock</div>
			</div>
		</div>
		<script src="../../../../libs/qunit-1.11.0.js" type="text/javascript"></script>
		<script src="../../../../libs/support.js"></script>
		<script src="../../../../libs/dist/js/tau.js" type="text/javascript"></script>

		<script>
			module('Page');

			asyncTest('Test resizes', function () {
				var counter = 0,
					timerID,
					testFunc = function () {
						window.removeEventListener("throttledresize", listener, false);
						equal(counter, 1, "throttledresize run only once");
						start();
					},
					listener = function (evt) {
						ok(evt, "event exists");
						equal(evt.type, "throttledresize", "event has proper type");
						++counter;
						if (timerID) {
							window.clearTimeout(timerID);
						}
						window.setTimeout(testFunc, ej.event.throttledresize.ttl);
					},
					i = 10,
					eventUtils = ej.event;
				window.addEventListener("throttledresize", listener, false);
				while (--i >= 0) {
					eventUtils.trigger(window, "resize");
				}
			});
		</script>
	</body>
</html>
